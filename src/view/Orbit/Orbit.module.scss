.root {
  @include aspect-ratio;

  position: fixed;
  top: 25vh;
  right: calc(-100% + 42vw - var(--scroll-width, 0px));
  z-index: -1;

  display: grid;

  width: calc(118vw - var(--scroll-width, 0px));

  pointer-events: none;
}

.chart {
  position: fixed;
  right: 0;
  bottom: 0;
  z-index: -1;

  /* stylelint-disable-next-line length-zero-no-unit */
  width: var(59vw - var(--scroll-width, 0px));

  opacity: 0;

  pointer-events: none;

  transition: opacity 500ms ease-in;

  path {
    stroke-dasharray: 10000;
    stroke-dashoffset: 10000;

    animation: chart-pulse 5s ease-in-out 5s infinite;

    @include media-reduced-motion(false) {
      transition: stroke-dashoffset 5s linear;
    }
  }

  &--to-the-moon {
    opacity: 1;

    path {
      stroke-dashoffset: 0;
    }
  }
}

@keyframes chart-pulse {
  0% {
    stroke-opacity: 1;
  }

  50% {
    stroke-opacity: 0.2;
  }

  100% {
    stroke-opacity: 1;
  }
}

.planet {
  width: 100%;
  height: 100%;

  background-image: radial-gradient(
    46% 46% at 56.43% 27.66%,
    #fff 0%,
    rgba(#d9d9d9, 0) 100%
  );
  border-radius: 50%;

  transition: transform 5s ease-out;

  transform: rotateZ(0deg);
  transform-origin: bottom right;

  &--moving-away {
    transform: rotateZ(-45deg);
  }
}

.spaceship {
  position: absolute;
  top: 15vh;
  left: calc(20vw - var(--scroll-width, 0px));

  display: grid;

  width: 277px;
  height: 277px;

  > * {
    grid-row: 1;
    grid-column: 1;
  }

  &--drifting {
    @include media-reduced-motion(false) {
      animation: spaceship-drifting 5s linear infinite;
    }
  }

  &--to-the-moon {
    @include media-reduced-motion(false) {
      animation: spaceship-to-the-moon 2s ease-in-out infinite alternate;
    }
  }
}

@keyframes spaceship-drifting {
  0% {
    transform: translate(0);
  }

  25% {
    transform: translate(5px, -5px);
  }

  50% {
    transform: translate(0, -10px);
  }

  75% {
    transform: translate(-5px, -5px);
  }

  100% {
    transform: translate(0);
  }
}

@keyframes spaceship-to-the-moon {
  0% {
    transform: translate(0);
  }

  100% {
    transform: translate(40px, -10px);
  }
}

.rocket-flame {
  position: relative;
  top: 140px;
  left: -50px;
  z-index: -1;

  display: grid;

  opacity: 0;

  transition: opacity 250ms ease-in-out;

  path {
    @include media-reduced-motion(false) {
      transform-origin: right top;

      animation: rocket-flame-flicker 2s ease-in-out infinite alternate;
    }
  }

  &--launch {
    opacity: 1;
  }
}

@keyframes rocket-flame-flicker {
  0% {
    transform: scale(0.5);
  }

  100% {
    transform: scale(1);
  }
}
